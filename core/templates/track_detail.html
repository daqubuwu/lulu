{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/track_detail.css' %}" />
{% endblock %}
{% block title %}{{ track.title }} - {{ track.artist.name }}{% endblock %}
{% block content %}
<div class="track-detail-container">
  <div class="track-header">
    <div class="track-cover">
      {% if track.album.cover %}
        <img src="{{ track.album.cover }}" alt="{{ track.title }}" />
      {% else %}
        <div class="no-cover">No Cover</div>
      {% endif %}
    </div>
    <div class="track-info">
      <h1>{{ track.title }}</h1>
      <p class="track-artist">{{ track.artist.name }}</p>
      <p class="track-album">–ê–ª—å–±–æ–º: {{ track.album.title }}</p>
      <p class="track-duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {{ track.duration }} —Å–µ–∫.</p>
      <p class="track-genres">–ñ–∞–Ω—Ä—ã:
        {% for genre in genres %}
          {{ genre.genre.name }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </p>
      {% if user.is_authenticated %}
        <form action="{% url 'like_track' track.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="like-button">
            {% if track.id in liked_tracks %}
              ‚ù§Ô∏è –£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
            {% else %}
              ü§ç –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            {% endif %}
          </button>
        </form>
      {% endif %}
    </div>
  </div>

  <div class="track-lyrics">
    <h2>–¢–µ–∫—Å—Ç —Ç—Ä–µ–∫–∞</h2>
    {% if track.lyrics %}
      <pre>{{ track.lyrics }}</pre>
    {% else %}
      <p>–¢–µ–∫—Å—Ç —Ç—Ä–µ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.</p>
    {% endif %}
  </div>
</div>

<div class="audio-player">
  <audio controls>
    <source src="{{ track.file_url }}" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ—ç–ª–µ–º–µ–Ω—Ç.
  </audio>
</div>
{% endblock %}